
<!DOCTYPE html>
<html lang="en-US">
  <head>

    
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-57784109-3"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-57784109-3');
      </script>
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Digger Documentation | Digger-Documentation</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Digger Documentation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Digger lets you dig your Unity terrains just like if they were voxel terrains." />
<meta property="og:description" content="Digger lets you dig your Unity terrains just like if they were voxel terrains." />
<link rel="canonical" href="https://ofux.github.io/Digger-Documentation/" />
<meta property="og:url" content="https://ofux.github.io/Digger-Documentation/" />
<meta property="og:site_name" content="Digger-Documentation" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Digger Documentation" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"Digger lets you dig your Unity terrains just like if they were voxel terrains.","headline":"Digger Documentation","name":"Digger-Documentation","url":"https://ofux.github.io/Digger-Documentation/"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/Digger-Documentation/assets/css/style.css?v=cb9da2cb100cc0c51e0ceea2490d8126306c14a3">
  </head>
  <body>

    <header class="page-header" role="banner">
      <h1 class="project-name">Digger Documentation</h1>
      <h2 class="project-tagline">Digger lets you dig your Unity terrains just like if they were voxel terrains.</h2>
      
        <a target="_blank" rel="noopener noreferrer" href="https://assetstore.unity.com/publishers/11530" class="btn">View on Asset Store</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="digger-documentation">Digger Documentation</h1>

<p>Digger is a simple yet powerful tool to create natural caves and overhangs on your Unity terrains directly from the Unity editor.</p>

<p>There are two versions of Digger: <strong>Digger</strong> and <strong>Digger PRO</strong>.
Digger PRO has all the features of Digger plus realtime/in-game editing support.</p>

<h2 id="support">Support</h2>

<p>To get support, please join us on <strong>Discord</strong>: https://discord.gg/C2X6C6s</p>

<h2 id="download">Download</h2>

<p>Digger and Digger PRO can be downloaded from the <a href="https://assetstore.unity.com/publishers/11530">Asset Store</a>.</p>

<h2 id="install">Install</h2>

<p>Digger is very easy to setup. Just download and import it from the Asset Store. <strong>When Unity asks you if you want to install required packages, click <em>Yes</em>.</strong></p>

<p>From now on, Digger should be imported and <strong>there should not be any error in the console</strong>. There should be a new menu: <em>Tools &gt; Digger</em>.</p>

<h3 id="install-shaders-for-urp-10">Install shaders for URP 10+</h3>

<p>If you are using URP 10+, you have to import <code class="language-plaintext highlighter-rouge">DiggerURP10.unitypackage</code> file that can be found in <em>Assets/Digger/Shaders</em> folder.</p>

<h2 id="update">Update</h2>

<p><strong>Before importing a new version of Digger, please delete the Assets/Digger folder.</strong> (but do <strong>not</strong> remove <em>DiggerData</em> folder)</p>

<p>Also, before updating Digger, it is recommended to backup your project (as with any asset update).</p>

<p><strong>After importing the new version, open Digger Master and click on <em>Sync &amp; Refresh</em>.</strong></p>

<h3 id="update-shaders-for-urp-10">Update shaders for URP 10+</h3>

<p>If you are using URP 10+, you have to import <code class="language-plaintext highlighter-rouge">DiggerURP10.unitypackage</code> file that can be found in <em>Assets/Digger/Shaders</em> folder.</p>

<h2 id="installation-issues">Installation issues</h2>

<p>If you get some errors after importing Digger, please check the following:</p>

<p><strong>First, make sure your project uses <em>.NET 4.x</em> as <a href="https://docs.unity3d.com/2019.1/Documentation/Manual/ScriptingRuntimeUpgrade.html">shown here</a>.</strong></p>

<p>Then, open the Package Manager (menu <em>Windows &gt; Package Manager</em>).</p>

<p><img src="assets/img/package-manager-menu.png" alt="Package Manager" width="180" /></p>

<p>Install the latest version of the packages <code class="language-plaintext highlighter-rouge">Mathematics</code> and <code class="language-plaintext highlighter-rouge">Burst</code>.</p>

<p>Delete Assets/Digger folder (if any) and import Digger into your project (from the Asset Store). <strong>When Unity asks you if you want to install required packages, click <em>No</em>.</strong></p>

<p>Some users reported issues with the Package Manager after importing Digger. This is a Unity/Package Manager bug. Fortunately there is a simple workaround: when importing Digger, <strong>unselect</strong> the <em>Manifest.json</em> file from the import window.</p>

<p>From now on, Digger should be imported and <strong>you should not have any error in the console</strong>. There should be a new menu: <em>Tools &gt; Digger</em>.</p>

<p>If you still have some issues, please join us on <strong>Discord</strong> so we can help you: https://discord.gg/C2X6C6s</p>

<h2 id="getting-started">Getting Started</h2>

<p>Open a scene with a terrain (you can open “simple-scene” in <em>Assets/Digger/Demo</em> for example) or create a terrain in a new scene. Configure your terrain layers as usual and modify your terrain as usual (raise or lower height, etc.). Make sure all your terrain layers have both a texture and a normal map.</p>

<p>Once this is done, click on <em>Tools &gt; Digger &gt; Setup terrains</em>. This will prepare Digger material, add Digger System to all terrains in the scene and add Digger Master object.</p>

<p><img src="assets/img/setup-terrains.png" alt="Package Manager" width="250" /></p>

<p>Click on Digger Master in the hierarchy of the scene to display the Digger Master inspector.</p>

<p><img src="assets/img/digger-master.png" alt="Package Manager" width="250" /></p>

<p>The Digger Master inspector looks like this:</p>

<p><img src="assets/img/digger-inspector-1.png" alt="Package Manager" width="300" /> <img src="assets/img/digger-inspector-2.png" alt="Package Manager" width="300" /></p>

<p>To start digging, just click somewhere on your terrain!</p>

<blockquote>
  <p>Note: the first time you dig, Unity will freeze during a few seconds. This is because the Burst compiler needs to compile internal Digger jobs.</p>
</blockquote>

<blockquote>
  <p>Note: make sure your terrain has at least one layer properly defined (with a texture).
If you have several terrains, make sure they share the same layers as Digger will only get layers that are common to all terrains.</p>
</blockquote>

<h2 id="details-of-each-field">Details of each field</h2>

<h3 id="edit-tab">Edit tab</h3>
<ul>
  <li><strong>Action:</strong> lets you choose the action to perform between digging terrain, raising overhangs, reseting (reset to terrain height but do not restore terrain details objects), painting textures, or painting holes.</li>
  <li><strong>Brush:</strong> lets you choose the brush type to use between sphere, cube and stalagmite.</li>
  <li><strong>Brush Size:</strong> the size of the brush.</li>
  <li><strong>Opacity:</strong> the speed at which you will dig/add mater to the terrain. This has no effect on reset and paint actions.</li>
  <li><strong>Depth:</strong> the depth from the surface where you want to perform the action. Useful to adjust the position of the brush relatively to the terrain surface.</li>
  <li><strong>List of textures:</strong> lets you choose which texture to use.</li>
  <li><strong>Auto-remove terrain details:</strong> enable this to remove grass and details objects  automatically while you dig. Note: this cannot be undone!</li>
  <li><strong>Persist in Play Mode:</strong> enable this to persist modifications that are done while the game is playing. This is generally what you want but if you want to test the DiggerRuntimeMaster in the editor, you will have to disable it.</li>
  <li><strong>Save Meshes as Assets:</strong> all meshes generated by Digger are saved as assets in your projects. This makes the scene file a lot smaller and will spead up loading.</li>
  <li><strong>Sync with terrain(s) &amp; Refresh:</strong> forces Digger to synchronize with terrains and recompute everything. You have to click on it after you changed terrain textures or terrain heights for example.</li>
  <li><strong>Clear:</strong> this will clear all modifications you’ve made to the terrains with Digger, but it won’t restore terrain details objects. This cannot be undone.</li>
</ul>

<h3 id="settings-tab">Settings tab</h3>
<ul>
  <li><strong>Scene data folder:</strong> Digger will automatically persist data in <code class="language-plaintext highlighter-rouge">Assets/DiggerData/&lt;scene-data-folder&gt;</code>. By default, this is the name of the scene. You can change it if you want, but don’t forget to rename the directory as well.</li>
  <li><strong>Enable shortcuts:</strong> Enable or disable Digger shortcuts.</li>
  <li><strong>Show underlying objects:</strong> Enable this to reveal all the objects generated by Digger in the hierarchy.</li>
  <li><strong>Layer:</strong> This is the layer you want to use for Digger-generated meshes.</li>
  <li><strong>Chunk Size:</strong> This is the size of each mesh that will be generated by Digger. Lower it to improve edit speed. Increase it to reduce the number of meshes.</li>
  <li><strong>Resolution:</strong> by default, Digger generates meshes that fit to terrain’s mesh, which is directly related to heightmap resolution (and terrain size), but you can tell Digger to use a finer resolution (respectively, 2 times, 4 times or 8 times the terrain’s mesh resolution) thanks to this parameter.</li>
  <li><strong>Enable Occlusion Culling:</strong> Occlusion Culling is not very stable on some versions of Unity, and Unity throws some errors (while it shouldn’t) when baking Occlusion Culling if some meshes have multiple materials for a single submesh. This is why it is disabled by default on Digger, but you can still enable it if you want. Note: this setting has no effect if DiggerMasterRuntime (Digger PRO only) is present in the scene as chunks are not static anymore in such case.</li>
  <li><strong>Create LODs:</strong> when enabled, Digger will automatically create 3 LODs for each mesh. Recommended only if you don’t plan to use Digger at runtime.</li>
  <li><strong>Screen Relative Transition Height of LODs:</strong> adjust these sliders to tell at which distance from the camera the cave/overhangs meshes should switch between LODs.
The bigger it is, the closer you will have to be from the object to get the highly detailed mesh.</li>
  <li><strong>Collider LOD:</strong> lets you change the Level Of Details of the collider mesh. If you want accurate collisions that fit exactly to the ground, set it to 0. If you want better performance and don’t mind to have a lower accuracy, increase it to 1 or 2.</li>
  <li><strong>Save Meshes as Assets:</strong> all meshes generated by Digger are saved as assets in your projects. This makes the scene file a lot smaller and will spead up loading.</li>
  <li><strong>Sync with terrain(s) &amp; Refresh:</strong> forces Digger to synchronize with terrains and recompute everything. You have to click on it after you changed terrain textures or terrain heights for example.</li>
  <li><strong>Clear:</strong> this will clear all modifications you’ve made to the terrains with Digger, but it won’t restore terrain details objects. This cannot be undone.</li>
</ul>

<h3 id="help-tab">Help tab</h3>

<p>This tab contains a link to this documentation as well as Discord for support.</p>

<p>It also gives you a link to write a review on the Asset Store which is the best way to thank the developer! :)</p>

<h3 id="shortcuts">Shortcuts</h3>

<p>If shorcuts are enabled (in settings tab), then you can:</p>
<ul>
  <li>press B to change brush</li>
  <li>press N to change action</li>
  <li>use keypad + and - to change brush size</li>
  <li>use keypad * and / to change opacity</li>
</ul>

<h2 id="realtime--in-game-editing-pro-only">Realtime / in-game editing (PRO only)</h2>

<h3 id="setup">Setup</h3>

<p>Digger now supports realtime editing, at runtime. To enable Digger at runtime, you <strong>must</strong> add <code class="language-plaintext highlighter-rouge">DiggerMasterRuntime</code> component in your scene(s). The easiest way to do this is to click on <em>Tools &gt; Digger &gt; Setup for runtime</em> menu. This will add an empty GameObject in your scene named “Digger Master Runtime” with the <code class="language-plaintext highlighter-rouge">DiggerMasterRuntime</code> attached to it.</p>

<p><img src="assets/img/setup-runtime.png" alt="Package Manager" width="250" /></p>

<blockquote>
  <p>Note: make sure your terrain has at least one layer properly defined (with a texture).
If you have several terrains, make sure they share the same layers as Digger will only get layers that are common to all terrains.</p>
</blockquote>

<h3 id="use">Use</h3>

<p>The <code class="language-plaintext highlighter-rouge">DiggerMasterRuntime</code> component doesn’t do much by itself. You will have to use its methods from your own scripts in order to perform actions on the terrain at runtime.</p>

<h4 id="synchronous-editing">Synchronous editing</h4>

<p>To edit the terrain synchronously, use the <em>Modify</em> method of DiggerMasterRuntime. <em>Synchronously</em> means that once this method returns, everything has been done, the terrain have been modified, required meshes have been generated and mesh colliders have been updated. In other words, it <em>waits</em> for the modification to be completely done before returning.</p>

<p>The signature of the <em>Modify</em> method is:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Modify the terrain at runtime by performing the requested action.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="position"&gt;Position where you want to edit the terrain&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="brush"&gt;Brush type&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="action"&gt;Action type&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="textureIndex"&gt;Index of the texture to be used (starting from 0 to 7). See DiggerMaster inspector to know what texture corresponds to an index.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="opacity"&gt;Strength/intensity of edit&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="size"&gt;Size of edit&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="removeDetails"&gt;Remove terrain details in range&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="removeTreesInSphere"&gt;Remove terrain trees in range&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="stalagmiteHeight"&gt;Height of stalagmite (only when Brush is stalagmite)&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="stalagmiteUpsideDown"&gt;Defines if stalagmite is upside-down or not (only when Brush is stalagmite)&lt;/param&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Modify</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">BrushType</span> <span class="n">brush</span><span class="p">,</span> <span class="n">ActionType</span> <span class="n">action</span><span class="p">,</span> <span class="kt">int</span> <span class="n">textureIndex</span><span class="p">,</span> <span class="kt">float</span> <span class="n">opacity</span><span class="p">,</span>
                   <span class="kt">float</span> <span class="n">size</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">removeDetails</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">removeTreesInSphere</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="kt">float</span> <span class="n">stalagmiteHeight</span> <span class="p">=</span> <span class="m">8f</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">stalagmiteUpsideDown</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span>
</code></pre></div></div>

<p>Here is an example showing how you could use it in your scripts:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">diggerMasterRuntime</span> <span class="p">=</span> <span class="n">FindObjectOfType</span><span class="p">&lt;</span><span class="n">DiggerMasterRuntime</span><span class="p">&gt;();</span>

<span class="k">if</span> <span class="p">(</span><span class="n">DiggerPhysics</span><span class="p">.</span><span class="nf">Raycast</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">forward</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">hit</span><span class="p">,</span> <span class="m">2000f</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">diggerMasterRuntime</span><span class="p">.</span><span class="nf">Modify</span><span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">,</span> <span class="n">BrushType</span><span class="p">.</span><span class="n">Sphere</span><span class="p">,</span> <span class="n">ActionType</span><span class="p">.</span><span class="n">Dig</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.5f</span><span class="p">,</span> <span class="m">4f</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="asynchronous-editing">Asynchronous editing</h4>

<p>To edit the terrain asynchronously, use the <em>ModifyAsync</em> or <em>ModifyAsyncBuffured</em> method of DiggerMasterRuntime. <em>Asynchronously</em> means that this method returns immediately without waiting for the modification to be actually done.</p>

<p>The signature of the <em>ModifyAsync</em> method is:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Modify the terrain at runtime by performing the requested action asynchronously to have less impact on frame rate.</span>
<span class="c1">/// It is NOT possible to call this method if another asynchronous modification is already in progress.</span>
<span class="c1">/// Use "IsRunningAsync" property to check if an asynchronous modification is already in progress.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="position"&gt;Position where you want to edit the terrain&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="brush"&gt;Brush type&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="action"&gt;Action type&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="textureIndex"&gt;Index of the texture to be used (starting from 0 to 7). See DiggerMaster inspector to know what texture corresponds to an index.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="opacity"&gt;Strength/intensity of edit&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="size"&gt;Size of edit&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="removeDetails"&gt;Remove terrain details in range. Note: starting from Unity 2019.3 this parameter is ignored and details are always removed.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="removeTreesInSphere"&gt;Remove terrain trees in range&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="stalagmiteHeight"&gt;Height of stalagmite (only when Brush is stalagmite)&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="stalagmiteUpsideDown"&gt;Defines if stalagmite is upside-down or not (only when Brush is stalagmite)&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="opacityIsTarget"&gt;If true when painting texture, the weight of the texture will be directly set to the given opacity&lt;/param&gt;</span>
<span class="k">public</span> <span class="n">IEnumerator</span> <span class="nf">ModifyAsync</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">BrushType</span> <span class="n">brush</span><span class="p">,</span> <span class="n">ActionType</span> <span class="n">action</span><span class="p">,</span> <span class="kt">int</span> <span class="n">textureIndex</span><span class="p">,</span> <span class="kt">float</span> <span class="n">opacity</span><span class="p">,</span>
                               <span class="kt">float</span> <span class="n">size</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">removeDetails</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">removeTreesInSphere</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="kt">float</span> <span class="n">stalagmiteHeight</span> <span class="p">=</span> <span class="m">8f</span><span class="p">,</span>
                               <span class="kt">bool</span> <span class="n">stalagmiteUpsideDown</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">opacityIsTarget</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span>
</code></pre></div></div>
<p><strong>You MUST check that <em>IsRunningAsync</em> is <em>false</em> before calling this method. Also, you MUST call it as a Coroutine.</strong>
This is why it is easier to use the <em>ModifyAsyncBuffured</em> method (see below).</p>

<p>The <em>ModifyAsyncBuffured</em> method appends the modification to a buffer so it can be performed asynchronously and takes care of the coroutine mess for you. It returns <em>true</em> if the modification could be appended to the buffer and <em>false</em> if the buffer was full and modification is discarded.</p>

<p>You can change the buffer size using the <code class="language-plaintext highlighter-rouge">BufferSize</code> property of DiggerMasterRuntime. By default, buffer size is 1.</p>

<p>The signature of the <em>ModifyAsyncBuffured</em> is:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Modify the terrain at runtime by performing the requested action asynchronously to have less impact on frame rate.</span>
<span class="c1">/// If another asynchronous modification is already in progress, this modification will be added to a buffer and will be performed later.</span>
<span class="c1">/// If the buffer is full, the modification is discarded and this method returns false.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;returns&gt;True if the modification could be appended to the buffer. False if the buffer is full and modification is discarded.&lt;/returns&gt;</span>
<span class="c1">/// &lt;param name="position"&gt;Position where you want to edit the terrain&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="brush"&gt;Brush type&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="action"&gt;Action type&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="textureIndex"&gt;Index of the texture to be used (starting from 0 to 7). See DiggerMaster inspector to know what texture corresponds to an index.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="opacity"&gt;Strength/intensity of edit&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="size"&gt;Size of edit&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="removeDetails"&gt;Remove terrain details in range. Note: starting from Unity 2019.3 this parameter is ignored and details are always removed.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="removeTreesInSphere"&gt;Remove terrain trees in range&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="stalagmiteHeight"&gt;Height of stalagmite (only when Brush is stalagmite)&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="stalagmiteUpsideDown"&gt;Defines if stalagmite is upside-down or not (only when Brush is stalagmite)&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="opacityIsTarget"&gt;If true when painting texture, the weight of the texture will be directly set to the given opacity&lt;/param&gt;</span>
<span class="k">public</span> <span class="kt">bool</span> <span class="nf">ModifyAsyncBuffured</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">BrushType</span> <span class="n">brush</span><span class="p">,</span> <span class="n">ActionType</span> <span class="n">action</span><span class="p">,</span> <span class="kt">int</span> <span class="n">textureIndex</span><span class="p">,</span> <span class="kt">float</span> <span class="n">opacity</span><span class="p">,</span>
                                <span class="kt">float</span> <span class="n">size</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">removeDetails</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">removeTreesInSphere</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="kt">float</span> <span class="n">stalagmiteHeight</span> <span class="p">=</span> <span class="m">8f</span><span class="p">,</span>
                                <span class="kt">bool</span> <span class="n">stalagmiteUpsideDown</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">opacityIsTarget</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span>
</code></pre></div></div>

<p>Here is an example showing how you could use it in your scripts:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">diggerMasterRuntime</span> <span class="p">=</span> <span class="n">FindObjectOfType</span><span class="p">&lt;</span><span class="n">DiggerMasterRuntime</span><span class="p">&gt;();</span>

<span class="k">if</span> <span class="p">(</span><span class="n">DiggerPhysics</span><span class="p">.</span><span class="nf">Raycast</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">forward</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">hit</span><span class="p">,</span> <span class="m">2000f</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">diggerMasterRuntime</span><span class="p">.</span><span class="nf">ModifyAsyncBuffured</span><span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">point</span><span class="p">,</span> <span class="n">BrushType</span><span class="p">.</span><span class="n">Sphere</span><span class="p">,</span> <span class="n">ActionType</span><span class="p">.</span><span class="n">Dig</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.5f</span><span class="p">,</span> <span class="m">4f</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="persistence-at-runtime">Persistence at runtime</h4>

<p>To persist modifications at runtime, just call <em>PersistAll</em> method of DiggerMasterRuntime.
<strong>Persistence must be enable in DiggerMasterRuntime inspector before building your project in order to be able to use it.</strong></p>

<p>Note: persistence methods have no effect in Unity editor.</p>

<p>Its signature is:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Persists all modifications made with Digger since the last persist call.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">PersistAll</span><span class="p">()</span>
</code></pre></div></div>

<p>You can also delete persisted data:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Deletes all Digger data that was persisted at runtime.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">DeleteAllPersistedData</span><span class="p">()</span>
</code></pre></div></div>

<p>And you can change the path at which data is written on disk:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// When a path-prefix is specified, Digger will persist data at "Application.persistentDataPath/DiggerData/pathPrefix/".</span>
<span class="c1">/// Otherwise it will persist data at "Application.persistentDataPath/DiggerData/"</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="pathPrefix"&gt;&lt;/param&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">SetPersistenceDataPathPrefix</span><span class="p">(</span><span class="kt">string</span> <span class="n">pathPrefix</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="adding-digger-to-new-terrains-created-at-runtime">Adding Digger to new terrains created at runtime</h4>

<p>You may want to generate new terrains at runtime procedurally, and add Digger to them so the player can dig. Digger lets you do this easily, but you will have to have at least one pre-existing terrain (in Unity editor) so Digger can configure itself.</p>

<p>Once you create the new terrain, all you need is to call <em>SetupRuntimeTerrain</em> method of DiggerMasterRuntime:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Setups Digger on a new terrain that has been created at runtime.</span>
<span class="c1">/// There MUST be at least one other terrain with Digger already setup at edit-time.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="terrain"&gt;Terrain on which Digger must be added&lt;/param&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">SetupRuntimeTerrain</span><span class="p">(</span><span class="n">Terrain</span> <span class="n">terrain</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="performance-tips">Performance tips</h3>

<p>Keep in mind that digging has a cost. To prevent performance issues at runtime, keep the brush size as small as possible. Also, try to call the <em>Modify</em> method at most one time per frame.</p>

<p>You can also improve performance by:</p>
<ul>
  <li>using Unity 2019.3+</li>
  <li>lowering the size of chunks (set it to 16) in the Settings tab</li>
  <li>disabling LODs generation</li>
  <li>use async modification methods</li>
  <li>reducing the size of the terrain’s control map (only if you use Unity 2019.2 o an older version)</li>
  <li>reducing the size of the terrain’s heightmap</li>
  <li>if you have a big terrain, cut it in smaller chunks (ie. use multiple terrains instead of only one)</li>
</ul>

<p>Note: if you are using CTS, Digger has to compute mesh tangents which slows down the build process.</p>

<h2 id="realtime--in-game-navmesh-update-pro-only">Realtime / in-game NavMesh update (PRO only)</h2>

<h3 id="about-navmeshcomponents">About NavMeshComponents</h3>

<p>Digger PRO includes <a href="https://github.com/Unity-Technologies/NavMeshComponents">NavMeshComponents</a> scripts (for reference, the version included corresponds to the comit 1f028efc4cbb7650992c91e2920b598db52bc74f of the GitHub’s repository).
The scripts have not been modified and are included as-is, which means if you already have those scripts in your project, you won’t need to import them.</p>

<h3 id="setup-1">Setup</h3>

<p>To enable Digger NavMeshComponents at runtime, you <strong>must</strong> add <code class="language-plaintext highlighter-rouge">DiggerNavMeshRuntime</code> component in your scene(s). The easiest way to do this is to click on <em>Tools &gt; Digger &gt; Setup NavMeshComponents</em> menu. This will add the DiggerNavMeshRuntime component to the “Digger Master Runtime” object.</p>

<h3 id="use-1">Use</h3>

<p>Digger NavMesh updater relies entirely on Unity’s NavMeshSurface component. You should <strong>NOT</strong> bake any NavMesh using the classical AI &gt; Navigation window because it will not be updated by Digger.</p>

<p><strong>First, you need at least one NavMeshSurface</strong> in your scene as Digger entirely relies on it. See <a href="https://github.com/Unity-Technologies/NavMeshComponents">NavMeshComponents documentation</a> and <a href="https://unity3d.com/fr/learn/tutorials/topics/navigation/navmeshsurface-component">NavMeshComponents Unity’s tutorial</a> for more information. You can also find some help by searching the web.</p>

<p>Once you added one or more NavMeshSurface to your scene, you can <strong>bake</strong> them before running your game so that when Digger will update the NavMesh it won’t need to build it entirely.</p>

<p>Before baking your NavMeshSurfaces, <strong>I strongly recommend to edit your terrains with Digger</strong>, at least a little bit, even if you only want runtime editing. This may look quite surprising, but doing so will prevent the NavMesh from rebuilding the whole terrain the first time you dig with Digger.</p>

<p>You are now ready to use DiggerNavMeshRuntime.</p>

<p>The <code class="language-plaintext highlighter-rouge">DiggerNavMeshRuntime</code> component doesn’t do much by itself. You will have to use its <em>CollectNavMeshSources</em> and <em>UpdateNavMeshAsync</em> methods from your own scripts in order to update the NavMesh at runtime.</p>

<p>The signature of <em>CollectNavMeshSources</em> method is:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Collects all NavMesh sources in the world. This should be called once, and only once, in the Start method of another MonoBehavior.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">CollectNavMeshSources</span><span class="p">()</span>
</code></pre></div></div>

<p>This method collects all NavMesh sources in the world. This should be called once, in the Start method of another MonoBehavior.</p>

<p>The signatures of <em>UpdateNavMeshAsync</em> method are:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Incrementally and asynchronously updates the NavMesh. Call this when you want the NavMesh to be refreshed, but avoid calling this every frame</span>
<span class="c1">/// to limit the impact on performance.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">UpdateNavMeshAsync</span><span class="p">()</span>
</code></pre></div></div>
<p>or</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Incrementally and asynchronously updates the NavMesh. Call this when you want the NavMesh to be refreshed, but avoid calling this every frame</span>
<span class="c1">/// to limit the impact on performance.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="callback"&gt;Callback method to be invoked once NavMesh has been updated&lt;/param&gt;</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">UpdateNavMeshAsync</span><span class="p">(</span><span class="n">Action</span> <span class="n">callback</span><span class="p">)</span>
</code></pre></div></div>

<p>This method incrementally and asynchronously updates the NavMesh. Call this when you want the NavMesh to be refreshed, but avoid calling this every frame to keep a good FPS. For example, if your player can dig continuously by holding the mouse button, you should update the NavMesh only once the player releases the mouse button.</p>

<p>Optionaly, you can pass a callback method as an argument. The callback will be called once the NavMesh has been refreshed.</p>

<h2 id="integration-with-microsplat">Integration with MicroSplat</h2>

<p>MicroSplat is fuly supported by Digger. It is actually recommended to use MicroSplat with Digger to get best results. MicroSplat is one of the best terrain shader available for Unity.</p>

<p>You will need:</p>
<ul>
  <li><a href="https://assetstore.unity.com/packages/tools/terrain/microsplat-96478">MicroSplat</a></li>
  <li><a href="https://assetstore.unity.com/packages/tools/terrain/microsplat-triplanar-uvs-96777">Triplanar module</a></li>
  <li><a href="https://assetstore.unity.com/packages/tools/terrain/microsplat-digger-integration-162840">Digger integration module</a></li>
</ul>

<h2 id="advanced-operations-module">Advanced Operations module</h2>

<p>The Advanced Operations module comes with a few new high-level operations that will save you a lot of time.</p>

<h3 id="spline">Spline</h3>

<h4 id="bezier-spline">Bezier Spline</h4>
<p>The Spline operation lets you perform a Dig or Add operation along a Bezier spline.</p>

<p>First, create a new spline by clicking on <em>Tools &gt; Digger &gt; Create Bezier Spline</em> menu. Then, select the new spline in the hierachy to display its inspector.</p>

<p>To edit the spline manually, you can:</p>
<ul>
  <li>add more points by clicking on the <em>Add Point</em> button in the inspector.</li>
  <li>remove a point by clicking on it in the scene view; Once it is selected, you can cick on the <em>Remove</em> button in the inspector.</li>
  <li>move a point of the spline by clicking on it in the scene view; Once it is selected, you can move it.</li>
  <li>change a connection between two points of the spline by clicking on it in the scene view; Once it is selected, 
click on one of the two little sphere that show up and move it. You can also change the connection type from the inspector.</li>
</ul>

<p>You can also edit the spline by generating it. See the Procedural Generation section of the spline’s inspector for more details.</p>

<h4 id="spline-operation">Spline operation</h4>
<p>Once your spline is ready, open the Digger Master inspector, select the operation “Spline”, and then pick-up your spline in the “Spline” field. The spline
should be displayed in the scene view.</p>

<p>Now, chose which operation you want to do along the spline (either Dig or Add) and click on the “Perform operation along the spline” button.
Et voilà!</p>

<h3 id="easy-overhangs">Easy Overhangs</h3>

<p>The Easy Overhangs operation lets you create big overhangs very quickly in your terrain’s cliffs. It is designed to work on almost-vertical slopes.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h4 id="when-i-dig-the-terrain-a-hole-appear-but-the-cave-mesh-seems-invisible">When I dig the terrain, a hole appear but the cave mesh seems invisible</h4>
<p>Make sure your terrain has at least one layer properly defined (with a texture).
If you have several terrains, make sure they share the same layers as Digger will only get layers that are common to all terrains.</p>

<h4 id="when-i-dig-for-the-first-time-it-works-but-as-soon-as-i-dig-again-bad-things-happen">When I dig for the first time, it works, but as soon as I dig again, bad things happen!</h4>
<p>Disable Burst Compilation from the Burst menu. Restart Unity, and try digging again. If this fixes your issue, it means Burst is doing something wrong on your platform.
In such case, you should report the bug to Unity.</p>

<h4 id="when-i-do-some-raycasts-it-still-detects-the-terrain-surface-on-holes-how-can-i-do-to-raycast-through-terrain-holes">When I do some raycasts, it still detects the terrain surface on holes. How can I do to raycast through terrain holes?</h4>
<p>Until Unity releases official terrain holes feature, you have to use DiggerPhysics.Raycast method to solve this.</p>

<h4 id="i-changed-the-textures-of-my-terrain-and-now-caves-dont-blend-with-terrain-properly-because-they-still-use-the-old-textures">I changed the textures of my terrain, and now caves don’t blend with terrain properly because they still use the old textures.</h4>
<p>Click on ‘Sync &amp; Refresh’ button of the Digger Master inspector.</p>

<p>If that’s not enough, delete texture arrays belonging to the terrain in Assets/DiggerData/TextureArrays and click on ‘Sync &amp; Refresh’ button of the Digger Master inspector. This will force Digger to recompute texture arrays.</p>

<h4 id="i-changed-the-heights-of-my-terrain-at-some-place-but-digger-doesnt-see-it">I changed the heights of my terrain at some place, but Digger doesn’t see it.</h4>
<p>Click on ‘Sync &amp; Refresh’ button of the Digger Master inspector. If you already dig/add mater at this place, you will probably have to reset it using the reset brush.</p>

<h4 id="what-should-i-save-when-i-backup-my-project">What should I save when I backup my project?</h4>
<p>Digger persists everything in Assets/DiggerData. If you save this folder, you’re fine.</p>

<p>Do NOT backup your project using only Export package feature of Unity, because it won’t keep internal Digger data that is put in “.internal” folders for each terrain (typically in Assets/DiggerData/<scene-name>/<guid>/.internal folders).</guid></scene-name></p>

<p>Instead, you have to copy paste your project folder manually.</p>

<h4 id="i-exported-diggerdata-folder-using-export-package-feature-of-unity-but-it-didnt-keep-modifications-made-with-digger">I exported DiggerData folder using Export package feature of Unity, but it didn’t keep modifications made with Digger.</h4>
<p>Internally, Digger persists voxel data in Assets/DiggerData/<scene-name>/<guid>/.internal folders which are not exported by Unity (Unity ignores folders starting with a dot). You’ll have to copy past it manually.</guid></scene-name></p>

<h4 id="digger-meshes-do-not-perfectly-blend-with-the-terrain-in-general">Digger meshes do not perfectly blend with the terrain in general.</h4>
<p>There should not be any visual difference between the terrain and the meshes generated by Digger.
However, there are a few reasons why it might happen:
Lightmapping is enabled on the terrain. You should disable it from terrain settings as Digger doesn’t support it. Go to the <a href="https://docs.unity3d.com/Manual/terrain-OtherSettings.html">terrain settings</a> and disable “Lightmap Static” toggle.
When the terrain is selected in the editor, it is looks more orange. Just unselect it.
In some particular cases, because ‘Draw instanced’ is enabled on your terrain. See below:</p>

<h4 id="digger-meshes-do-not-perfectly-blend-with-the-terrain-at-some-places-in-particularly-on-slopes">Digger meshes do not perfectly blend with the terrain at some places, in particularly on slopes.</h4>
<p>This can happen with some textures on some parts of the terrain if you enabled ‘Draw instanced’ in the terrain’s settings. This is because terrain normal is a bit different when this is enabled, so it can interact with lights a bit differently, making Digger mesh distinguishable.</p>

<p>In most cases, this is not noticable (all screenshots on the Asset Store page have been made with a terrain where Draw instanced is enabled for example), but if you find that it is too visible, you can simply disable Draw instanced in the <a href="https://docs.unity3d.com/Manual/terrain-OtherSettings.html">terrain settings</a>.</p>

<h4 id="when-i-get-away-from-a-place-i-dug-at-a-certain-distance-i-can-see-a-thin-dark-border-around-digger-meshes">When I get away from a place I dug, at a certain distance, I can see a thin dark border around Digger meshes.</h4>
<p>Try to lower the <em>Pixel error</em> in <a href="https://docs.unity3d.com/Manual/terrain-OtherSettings.html">terrain settings</a>.</p>

<h4 id="some-of-the-terrain-textures-are-missing-in-digger-inspector-and-they-are-not-rendered-on-digger-meshes">Some of the terrain textures are missing in Digger inspector, and they are not rendered on Digger meshes.</h4>
<p>This happen when you have some terrain layers that don’t have a normal map. Digger requires all terrain layers to have a normal map.
See this page for more information about terrain layers: https://docs.unity3d.com/Manual/class-TerrainLayer.html</p>

<h2 id="faq">F.A.Q</h2>

<h4 id="does-digger-support-the-built-in-navmesh-system">Does Digger support the built in navmesh system?</h4>
<p>No, because the navmesh system will still think the terrain is there (it won’t take terrain holes into account).
We will have to wait for Unity 2019.3 and its official, clean, terrain <em>cut</em> feature for this.</p>

<h4 id="is-this-an-extension-to-unitys-built-in-terrain-system-or-an-entirely-proprietary-system">Is this an extension to Unity’s built-in terrain system or an entirely proprietary system?</h4>
<p>It’s an extension of the Unity’s built in terrain system. Basically, it just cuts the terrain where needed and generate meshes for caves and overhangs. In the end, you get a Unity terrain + some meshes (with different LODs because Digger generates automatically different LODs for each mesh).</p>

<p>Transition between meshes and terrain is seamless because they basically use the “same” shader (actually two different versions of the same shader: one for the terrain and one for the meshes).</p>

<h4 id="can-caves-be-alteredcreated-at-runtime-aka-player-terraforming">Can caves be altered/created at runtime? (AKA player terraforming)</h4>
<p>No, only edit time. For real-time, you should get a full voxel terrain engine like Ultimate Terrains.</p>

<h4 id="does-this-affect-collisions-meaning-i-can-walk-my-character-in-these-holes-and-into-the-caves">Does this affect collisions? Meaning I can walk my character in these holes and into the caves?</h4>
<p>Yes it solves collision thanks to automatically generated triggers + collision meshes. At the end of the video (on Asset Store page), you can see some balls falling into the caves. There is no need to add anything to your objects to make it work.</p>

<p>However, to get Raycast working, you will have to use DiggerPhysics.Raycast method.</p>

<h4 id="how-can-i-do-to-make-raycast-working-through-cave-entrances">How can I do to make Raycast working through cave entrances?</h4>
<p>Until official terrain hole/cut feature (coming in Unity 2019.3), you have to use the DiggerPhysics.Raycast method.</p>

<h4 id="how-to-see-the-objects-and-meshes-created-by-digger-from-the-hierarchy">How to see the objects and meshes created by Digger from the hierarchy?</h4>
<p>Find the <em>DiggerSystem</em> object which is a child of your Terrain. Select it. In the inspector GUI, enable <em>“Show debug data”</em>. Save the scene and reload it (close it and open it again or restart Unity).
You will now see all the objects, meshes and colliders as children of the <em>DiggerSystem</em> object.</p>

<h2 id="support-1">Support</h2>

<p>To get support, join us on <strong>Discord</strong>: https://discord.gg/C2X6C6s</p>

<p>Latest version of this documentation can be found here: https://ofux.github.io/Digger-Documentation/</p>

<h2 id="about-unity-20193">About Unity 2019.3</h2>

<p>Unity 2019.3 comes with a new feature allowing to cleanly cut holes in the terrain. However, it does <strong>not</strong> create cave meshes for you. This is why Digger is a perfect companion of this new feature.</p>

<p>Thanks to this new way to cut holes in the terrain surface, Digger has better performance, is more robust, works out of the box with NavMesh and works with Physics.Raycast (no need to use DiggerPhysics anymore).</p>

<p>This is why <strong>it is recommended to use Unity 2019.3 with Digger or Digger PRO</strong>.</p>

<h2 id="how-to-thank-the-developer">How to thank the developer?</h2>

<p>If you like Digger, the best way to help the project is to write a review on the Asset Store.
Nothing makes me happier than a nice review!</p>

<p>Also, don’t hesitate to share your feedback on Discord. It’s important to improve the product.</p>

<p>That’s all. Now go and enjoy digging your terrains!</p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/ofux/Digger-Documentation">Digger-Documentation</a> is maintained by <a href="https://github.com/ofux">ofux</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
